# 名词

**DEV** Development environment 开发环境，用于开发者调试使用

**FAT** Feature Acceptance Test environment 功能验收测试环境，用于软件测试者测试使用

**UAT** User Acceptance Test environment 用户验收测试环境，用于生产环境下的软件测试者测试使用

**PRO** Production environment  生产环境

**CDN** 内容分发网络是指一种通过互联网互相连接的电脑网络系统，提供高性能、可扩展性、及低成本的网络将内容传递给用户。

**QPS** queries per second, 每秒内查询次数

**TPS** transactions per second，每秒内的事务数

**RPS** requests per second 并发数/平均响应时间

**PV** 即Page View，即页面浏览量或点击量，用户每次刷新即被计算一次。

**UV**（unique visitor）即独立访客数，指访问某个站点或点击某个网页的不同IP地址的人数。在同一天内，UV只记录第一次进入网站的具有独立IP的访问者，在同一天内再次访问该网站则不计数。

**QoS** 在数据包交换网络和计算机网络领域中，流量工程术语服务质量指的是网络满足给定业务合同的概率，或在许多情况下，非正式地用来指分组在网络中两点间通过的概率。QoS是一种控制机制，它提供了针对不同用户或者不同数据流采用相应不同的优先级，或者是根据应用程序的要求，保证数据流的性能达到一定的水准。QoS的保证对于容量有限的网络来说是十分重要的，特别是对于流多媒体应用，例如VoIP和IPTV等，因为这些应用常常需要固定的传输率，对延时也比较敏感。 在电话业务领域中，服务质量是指线路噪音和声音，适当的音量水平等指标的衡量，并且不能与服务等级相混淆。

**SPU**  Standard Product Unit （标准化产品单元），SPU是商品信息聚合的最小单位，是一组可复用、易检索的标准化信息的集合，该集合描述了一个产品的特性

**RPC**（Remote Procedure Call Protocol）——远程过程调用协议，它是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议
**IOC** Inversion of Control，即“控制反转”，不是什么技术，而是一种设计思想。在Java开发中，Ioc意味着将你设计好的对象交给容器控制，而不是传统的在你的对象内部直接控制

**APM** APM (Application Performance Management) 即应用性能管理，属于IT运维管理（ITOM)范畴。主要是针对企业 关键业务的IT应用性能和用户体验的监测、优化，提高企业IT应用的可靠性和质量，保证用户得到良好的服务，降 低IT总拥有成本(TCO)。

**ACL** 访问控制列表（Access Control List，*ACL*） 

**CGI** 通用网关接口（Common Gateway Interface/CGI）是一种重要的互联网技术，可以让一个客户端，从网页浏览器向服务器上的程序请求数据。CGI描述了服务器和请求处理程序之间传输数据的一种标准。

# 压力测试

压力测试是评估系统处于或超过预期负载时系统的运行情况。压力测试的关注点在于系统在峰值负载或超出最大载荷情况下的处理能力。在压力级别逐渐增加时，系统性能应该按照预期缓慢下降，但是不应该崩溃。压力测试还可以发现系统崩溃的临界点，从而发现系统中的薄弱环节。

# 容量测试

确定系统可处理同时在线的最大用户数，使系统承受超额的数据容量来发现它是否能够正确处理。

# 极限测试

在过量用户下的负载测试。




# 火焰图

![](./assets/images/Gregg4.svg)

y 轴表示调用栈，每一层都是一个函数。调用栈越深，火焰就越高，顶部就是正在执行的函数，下方都是它的父函数。

x 轴表示抽样数，如果一个函数在 x 轴占据的宽度越宽，就表示它被抽到的次数多，即执行的时间长。注意，x 轴不代表时间，而是所有的调用栈合并后，按字母顺序排列的。

**火焰图就是看顶层的哪个函数占据的宽度最大。只要有"平顶"（plateaus），就表示该函数可能存在性能问题。**

颜色没有特殊含义，因为火焰图表示的是 CPU 的繁忙程度，所以一般选择暖色调。

[火焰图生成工具](https://github.com/brendangregg/FlameGraph)



# 分布式
## CAP

### 简介

CAP原则又称CAP定理，指的是在一个分布式系统中，一致性（Consistency）、可用性（Availability）、分区容错性（Partition tolerance）。CAP 原则指的是，这三个要素最多只能同时实现两点，不可能三者兼顾。

* 一致性(C): 分布是系统中多个主机之间是否能够保值数据一致的特性。即，当系统数据发生更新操作后，各个主机中的数据仍然处于一致的状态。
* 可用性(A): 系统提供的服务必须一致处于可用状态，即对于用户的每一次请求，系统总是可以在有限的时间内对 用户做出响应
* 分区容错性(P): 分布式系统在遇到任何网络分区故障时，仍能够保证对外提供满足一致性和可用性的服务。

对于分布式系统，网络环境相对时不可控的，出现网络分区时不可避免的，因此系统必须具备分区容错性。但其斌不能同事保证一致性与可用性。CAP原则对于一个分布式系统来说，只能满足两项。



* CP 系统  Google BigTable, Hbase, MongoDB, Redis, MemCacheDB 

* AP 系统 Amazon Dynamo,Apache Cassandra, Voldemort

* CA 系统 Kafka

  > 严格来说,CAP理论是针对分区副本来定义的，之所以说kafka放弃P，只支持CA，是因为，kafka原理中当出现单个broker宕机，将要出现分区的时候，直接将该broker从集群中剔除，确保整个集群不会出现P现象
  >
  > 如果topic仅配置了两个副本且一个失败（即，同步副本中只有一个仍然存在），则指定acks = all的写入将成功。 但是，如果剩余的副本也失败，则这些写入可能会丢失。 
  >
  > https://stackoverflow.com/questions/51375187/why-kafka-is-not-p-in-cap-theorem/51379079

[Brewer's conjecture and the feasibility of consistent, available, partition-tolerant web services](https://courses.e-ce.uth.gr/CE623/CAP_theorem_proof.pdf)

## BASE理论

BASE 时 Basically Available(基本可用)、Soft state(软状态)和Eventually consistent(最终一致性)三个短语的简写。